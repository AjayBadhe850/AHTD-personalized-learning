<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Subject Details - AI Learning Platform</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .test-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }
        .test-header h1 {
            color: #333;
            margin: 0;
            font-size: 2.5rem;
        }
        .test-header p {
            color: #666;
            margin: 10px 0 0 0;
            font-size: 1.1rem;
        }
        .test-section {
            margin-bottom: 40px;
        }
        .test-section h2 {
            color: #4f46e5;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        .subjects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .subject-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid #e0e0e0;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .subject-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        .subject-image {
            height: 80px;
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
        }
        .subject-content {
            padding: 20px;
        }
        .subject-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
            margin: 0 0 10px 0;
        }
        .subject-description {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.5;
            margin: 0 0 15px 0;
        }
        .subject-meta {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .subject-lessons, .subject-difficulty {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        .subject-lessons {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
        }
        .subject-difficulty {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }
        .test-info {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .test-info h3 {
            color: #333;
            margin: 0 0 10px 0;
        }
        .test-info p {
            color: #666;
            margin: 5px 0;
        }
        .debug-info {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
        }
        .debug-info h4 {
            color: #1976d2;
            margin: 0 0 10px 0;
        }
        .debug-info pre {
            background: white;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>üß™ Subject Details Test</h1>
            <p>Test the subject details functionality and lesson loading</p>
        </div>

        <div class="test-section">
            <div class="test-info">
                <h3>üìã Test Instructions</h3>
                <p><strong>1.</strong> Click on any subject card below to test the subject details modal</p>
                <p><strong>2.</strong> The modal should show the subject description and list of available lessons</p>
                <p><strong>3.</strong> Click on individual lessons to test the lesson modal</p>
                <p><strong>4.</strong> Check the browser console for debug information</p>
            </div>

            <h2>üìö Available Subjects</h2>
            <div class="subjects-grid" id="subjects-container">
                <!-- Subjects will be loaded here -->
            </div>
        </div>

        <div class="debug-info">
            <h4>üîç Debug Information</h4>
            <p>Open browser console (F12) to see detailed debug logs</p>
            <div id="debug-output">
                <p>Debug information will appear here...</p>
            </div>
        </div>
    </div>

    <!-- Include the main script -->
    <script src="script.js"></script>
    
    <script>
        // Test-specific functionality
        let testPlatform;
        
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('üß™ Test page loaded');
            
            // Initialize the platform
            testPlatform = new AILearningPlatform();
            
            // Load subjects for testing
            await loadTestSubjects();
            
            // Add debug logging
            setupDebugLogging();
        });
        
        async function loadTestSubjects() {
            try {
                console.log('üîç Loading subjects for testing...');
                
                // Load subjects from API
                const response = await fetch('http://localhost:3000/api/subjects');
                const subjects = await response.json();
                
                console.log('‚úÖ Subjects loaded:', subjects);
                
                // Display subjects
                const container = document.getElementById('subjects-container');
                container.innerHTML = subjects.map(subject => `
                    <div class="subject-card" onclick="testSubjectClick('${subject.id}')">
                        <div class="subject-image">
                            <i class="fas fa-${subject.icon || 'book'}"></i>
                        </div>
                        <div class="subject-content">
                            <h3 class="subject-title">${subject.name}</h3>
                            <p class="subject-description">${subject.description}</p>
                            <div class="subject-meta">
                                <span class="subject-lessons">
                                    <i class="fas fa-play-circle"></i> 3 lessons
                                </span>
                                <span class="subject-difficulty">${subject.difficulty}</span>
                            </div>
                        </div>
                    </div>
                `).join('');
                
                updateDebugInfo(`‚úÖ Loaded ${subjects.length} subjects successfully`);
                
            } catch (error) {
                console.error('‚ùå Error loading subjects:', error);
                updateDebugInfo(`‚ùå Error loading subjects: ${error.message}`);
            }
        }
        
        function testSubjectClick(subjectId) {
            console.log(`üß™ Testing subject click: ${subjectId}`);
            updateDebugInfo(`üß™ Testing subject click: ${subjectId}`);
            
            // Call the platform's showSubjectDetails method
            if (testPlatform) {
                testPlatform.showSubjectDetails(subjectId);
            } else {
                console.error('‚ùå Platform not initialized');
                updateDebugInfo('‚ùå Platform not initialized');
            }
        }
        
        function setupDebugLogging() {
            // Override console.log to also update the debug display
            const originalLog = console.log;
            console.log = function(...args) {
                originalLog.apply(console, args);
                
                // Update debug display for relevant logs
                const message = args.join(' ');
                if (message.includes('üîç') || message.includes('‚úÖ') || message.includes('‚ùå')) {
                    updateDebugInfo(message);
                }
            };
        }
        
        function updateDebugInfo(message) {
            const debugOutput = document.getElementById('debug-output');
            const timestamp = new Date().toLocaleTimeString();
            debugOutput.innerHTML += `<p>[${timestamp}] ${message}</p>`;
            debugOutput.scrollTop = debugOutput.scrollHeight;
        }
    </script>
</body>
</html>
